<html>
    <head>
      <!--<meta name="google-site-verification" content="Z7SEnQaO9LAITbhuwGaI3rFtnpMRKeV9BbaW3LyvP2g" />-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="revised" content="16 May 2022" />
        <title>Drill down: A. Specialists and technicians</title>

        <!--<link rel="stylesheet" href="https://latex.now.sh/style.css"> -->
        <link rel="stylesheet" href="https://alanintsukuba.github.io/latex.css">
        <link rel="stylesheet" href="https://alanintsukuba.github.io/ShowReferencesModal.css"> 
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" 
integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" 
integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]-->    
</head>
<body>
<h1>Drill down: A. Specialists and technicians</h1>
<p class="author"><a href="https://orcid.org/0000-0003-0070-2347" target="_blank">Alan Engel</a><br>Last update: 
    16 May 2022</p>
<main>
    <p>Of the <a href="">major occupation groups</a>, specialists and technicians shows 
    persistently high gender segregation by occupation. This major group includes 
    stubbornly segregated STEM (see <a href="#UchikoshiEtal2020">Uchikoshi et al, 2020</a>),
    This task takes a closer look.</p>
    <p>As a whole, employment of specialists and technicians grew from 6.4 million in 1985 
        to 8.5 million in 2005, as <a href="DescriptiveStatistics.html">share of total 
        employment from 11% to 14%</a>. Total spectech employment declined somewhat between 2000 and 2005 
        with male-dominant engineers and technicians taking the largest hit, from 29% of 
        this major group in 2000 to 25% in 2005. As a share, teachers' decline from 22% in 
        1985 to 16% in 2005 occurred mainly between 1985 and 1995.
    </p>

<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
    <tr>
    <th style="text-align:left;text-align: center;">  </th>
    <th style="text-align:right;text-align: center;"> 1985 </th>
    <th style="text-align:right;text-align: center;"> 1990 </th>
    <th style="text-align:right;text-align: center;"> 1995 </th>
    <th style="text-align:right;text-align: center;"> 2000 </th>
    <th style="text-align:right;text-align: center;"> 2005 </th>
    </tr>
</thead>
<tbody>
    <tr>
    <td style="text-align:left;"> Sample size (in 1000) </td>
    <td style="text-align:right;"> 6388 </td>
    <td style="text-align:right;"> 7180 </td>
    <td style="text-align:right;"> 8126 </td>
    <td style="text-align:right;"> 8568 </td>
    <td style="text-align:right;"> 8542 </td>
    </tr>
    <tr grouplength="3"><td colspan="6" style="border-bottom: 1px solid;"><strong>A. Number of occupations</strong></td></tr>
<tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> Number of occupations </td>
    <td style="text-align:right;"> 52 </td>
    <td style="text-align:right;"> 51 </td>
    <td style="text-align:right;"> 52 </td>
    <td style="text-align:right;"> 54 </td>
    <td style="text-align:right;"> 54 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> Appearing occupations </td>
    <td style="text-align:right;">  </td>
    <td style="text-align:right;"> 0 </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 0 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> Disappearing occupations </td>
    <td style="text-align:right;">  </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 0 </td>
    <td style="text-align:right;"> 0 </td>
    <td style="text-align:right;"> 0 </td>
    </tr>
    <tr grouplength="1"><td colspan="6" style="border-bottom: 1px solid;"><strong>B. Labor force participation (%)</strong></td></tr>
<tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> Female </td>
    <td style="text-align:right;"> 40 </td>
    <td style="text-align:right;"> 41 </td>
    <td style="text-align:right;"> 42 </td>
    <td style="text-align:right;"> 43 </td>
    <td style="text-align:right;"> 47 </td>
    </tr>
    <tr grouplength="12"><td colspan="6" style="border-bottom: 1px solid;"><strong>C. Distribution of occupational major groups (%)</strong></td></tr>
<tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 101 Scientists </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 102 Engineers and technicians </td>
    <td style="text-align:right;"> 27 </td>
    <td style="text-align:right;"> 29 </td>
    <td style="text-align:right;"> 29 </td>
    <td style="text-align:right;"> 29 </td>
    <td style="text-align:right;"> 25 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 103 Healthcare </td>
    <td style="text-align:right;"> 25 </td>
    <td style="text-align:right;"> 24 </td>
    <td style="text-align:right;"> 26 </td>
    <td style="text-align:right;"> 28 </td>
    <td style="text-align:right;"> 31 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 104 Social </td>
    <td style="text-align:right;"> 6 </td>
    <td style="text-align:right;"> 6 </td>
    <td style="text-align:right;"> 6 </td>
    <td style="text-align:right;"> 7 </td>
    <td style="text-align:right;"> 8 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 105 Legal </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 1 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 106 Managers </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 2 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 107 Teachers </td>
    <td style="text-align:right;"> 22 </td>
    <td style="text-align:right;"> 20 </td>
    <td style="text-align:right;"> 18 </td>
    <td style="text-align:right;"> 16 </td>
    <td style="text-align:right;"> 16 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 108 Religious </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 1 </td>
    <td style="text-align:right;"> 1 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 109 Writers </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 1 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 110 Arts, design, photo </td>
    <td style="text-align:right;"> 3 </td>
    <td style="text-align:right;"> 4 </td>
    <td style="text-align:right;"> 3 </td>
    <td style="text-align:right;"> 3 </td>
    <td style="text-align:right;"> 3 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 111 Entertainment </td>
    <td style="text-align:right;"> 3 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    <td style="text-align:right;"> 2 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 112 Tutors, athletes NEC </td>
    <td style="text-align:right;"> 8 </td>
    <td style="text-align:right;"> 8 </td>
    <td style="text-align:right;"> 8 </td>
    <td style="text-align:right;"> 7 </td>
    <td style="text-align:right;"> 8 </td>
    </tr>
    <tr grouplength="12"><td colspan="6" style="border-bottom: 1px solid;"><strong>D. Female labor force by major groups (%)</strong></td></tr>
<tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 101 Scientists </td>
    <td style="text-align:right;"> 9 </td>
    <td style="text-align:right;"> 11 </td>
    <td style="text-align:right;"> 13 </td>
    <td style="text-align:right;"> 14 </td>
    <td style="text-align:right;"> 16 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 102 Engineers and technicians </td>
    <td style="text-align:right;"> 4 </td>
    <td style="text-align:right;"> 6 </td>
    <td style="text-align:right;"> 6 </td>
    <td style="text-align:right;"> 7 </td>
    <td style="text-align:right;"> 8 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 103 Healthcare </td>
    <td style="text-align:right;"> 70 </td>
    <td style="text-align:right;"> 73 </td>
    <td style="text-align:right;"> 72 </td>
    <td style="text-align:right;"> 73 </td>
    <td style="text-align:right;"> 74 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 104 Social </td>
    <td style="text-align:right;"> 87 </td>
    <td style="text-align:right;"> 85 </td>
    <td style="text-align:right;"> 85 </td>
    <td style="text-align:right;"> 86 </td>
    <td style="text-align:right;"> 86 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 105 Legal </td>
    <td style="text-align:right;"> 8 </td>
    <td style="text-align:right;"> 10 </td>
    <td style="text-align:right;"> 12 </td>
    <td style="text-align:right;"> 14 </td>
    <td style="text-align:right;"> 15 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 106 Managers </td>
    <td style="text-align:right;"> 4 </td>
    <td style="text-align:right;"> 6 </td>
    <td style="text-align:right;"> 7 </td>
    <td style="text-align:right;"> 10 </td>
    <td style="text-align:right;"> 11 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 107 Teachers </td>
    <td style="text-align:right;"> 42 </td>
    <td style="text-align:right;"> 43 </td>
    <td style="text-align:right;"> 45 </td>
    <td style="text-align:right;"> 47 </td>
    <td style="text-align:right;"> 48 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 108 Religious </td>
    <td style="text-align:right;"> 18 </td>
    <td style="text-align:right;"> 17 </td>
    <td style="text-align:right;"> 17 </td>
    <td style="text-align:right;"> 16 </td>
    <td style="text-align:right;"> 15 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 109 Writers </td>
    <td style="text-align:right;"> 21 </td>
    <td style="text-align:right;"> 25 </td>
    <td style="text-align:right;"> 29 </td>
    <td style="text-align:right;"> 32 </td>
    <td style="text-align:right;"> 34 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 110 Arts, design, photo </td>
    <td style="text-align:right;"> 31 </td>
    <td style="text-align:right;"> 34 </td>
    <td style="text-align:right;"> 35 </td>
    <td style="text-align:right;"> 36 </td>
    <td style="text-align:right;"> 38 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 111 Entertainment </td>
    <td style="text-align:right;"> 66 </td>
    <td style="text-align:right;"> 66 </td>
    <td style="text-align:right;"> 66 </td>
    <td style="text-align:right;"> 66 </td>
    <td style="text-align:right;"> 66 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 112 Tutors, athletes NEC </td>
    <td style="text-align:right;"> 46 </td>
    <td style="text-align:right;"> 44 </td>
    <td style="text-align:right;"> 46 </td>
    <td style="text-align:right;"> 50 </td>
    <td style="text-align:right;"> 51 </td>
    </tr>
</tbody>
</table>
           <p>Women's participation in the spectech occupations grew from 40% in 1985 
        to 47% in 2005. Their gains are evident in most mid-level spectech groups. The 
    only noticable decline was in religious work. Their share of female-dominated 
healthcare rose further, and was essentially flat in female-dominated social work and 
entertainment.</p>
    <p>When total segregation is decomposed into the sum of segregation between 
        mid-level groups and a weighted sum of segregation scores within these groups, 
        we see that the between contribution for mid-level spectech groups is more 
        than double that seen at the <a href="ElbersTotalSegregation.html">major group level</a>. 
        This implies that these mid-level groups are more gender-specific than the major 
        groups. The between share is essentially flat from 1985 to 2005, which implies that 
    existing patterns of gender segregation are being maintained.</p>
        <p> Male-dominated scientists, legal workers and financial workers show 
    low levels of segregation, an observation that gets a closer look below. At first glance, 
    the finding that segregation is low for scientists may seem odd, given that women accounted for 
    only 9 % in 1985, this share increasing to only 16 % in 2005. The reason for the low segregation 
    index is that it compares gender segregation between researchers in the natural sciences and 
    researchers in the humanities and social sciences. Healthcare 
occupations include highly gender-specific doctors and nurses.</p>
    <figure>
        <img src="images/SpecTechSegregation01.png"
              loading="lazy" alt="A. Specialists and 
              technicians 1985-2005" width="600" height="900" />
            <figcaption>Occupational gender segregation 1985-2005: A. Specialists and 
                technicians
            </figcaption>
    </figure>
    <p>Women's share of entertainment work remained at 66% over these two decades, but 
        segregation declined. How can this be? Decomposition of changes in these mid-level 
        groups (see Figure and Table 2 below) shows that most of the decline in segregation was structural. 
        Determining whether this is due more to men entering female-dominated occupations 
        or vice versa requires deeper analysis. In this context, white-collar women's 
        increased patronage of entertainment (<a href="#Ho2012">Ho, 2012</a>, and 
        <a href="#Ho2015">Ho, 2015</a>) is worth noting. That occupational margins also 
        contributed suggests a weakening of existing segregated occupations.
    </p>
    <p>Decomposing changes in total spectech segregation (see Figure) shows that the largest 
        contribution to change was reduced structural segregation with a lesser contribution 
        from changes in gender mix (gender margins). Changes in employment in segregated occupations (occupation 
        margins) contributed additional segregation. It might be tempting to try to visually sum 
        contributions in mid-level groups to get the total decomposition; this is readily 
        feasible because the total is a weighted sum of the mid-levels plus the between, which 
        is not in this figure; it's not clear whether or not the between term can be further 
        decomposed.
    </p>
    <figure>
        <img src="images/SpecTechDiffs.png"
              loading="lazy" alt="Decomposition of major group changes 1985-2005" width="600" height="900" />
            <figcaption>Decomposition of major group changes 1985-2005: A. Specialists and 
                technicians
            </figcaption>
    </figure>
    <p>Several of the decompositions listed in Table 2 below warrant a closer look. The change in gender 
        segregation for 105 Legal, for example, shows a -1302% contribution from gender margins, -6% from 
        occupational margins, and 1408% from structural change. Elbers decomposes M by estimating the 
    changes in cell values that would be expected if there were only marginal changes and no structural change. 
    These expected values are called the 'counterfactuals.'
    The structural changes are then the differences between these expected values and the actual observed 
    values. The estimated cell values are calculated using the procedure developed by 
    <a href="#DemingStephan1940">Deming and Stephan (1940)</a> 
    for adjusting sampled frequency tables when the expected marginal totals are known. Deming and Stephan 
    provide a worked example that I adapt in 
    <a href="EstimatingCounterfactuals.html">Drill down: A. Specialists and technicians - Estimating counterfactuals following Deming and Stephan (1940)</a>.</p>

<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">M</div></th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="2"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Marginal</div></th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
</tr>
    <tr>
    <th style="text-align:left;"> Component </th>
    <th style="text-align:right;"> 1985 </th>
    <th style="text-align:right;"> 2005 </th>
    <th style="text-align:right;"> Diff. </th>
    <th style="text-align:right;"> Appearing </th>
    <th style="text-align:right;"> Disappearing </th>
    <th style="text-align:right;"> Occupation </th>
    <th style="text-align:right;"> Gender </th>
    <th style="text-align:left;"> Structural </th>
    </tr>
</thead>
<tbody>
    <tr>
    <td style="text-align:left;"> Specialists/technicians total </td>
    <td style="text-align:right;"> 0.317 </td>
    <td style="text-align:right;"> 0.283 </td>
    <td style="text-align:right;"> -0.034 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.013 </td>
    <td style="text-align:right;"> -0.005 </td>
    <td style="text-align:left;"> -0.042 </td>
    </tr>
    <tr>
    <td style="text-align:left;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-1%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-38%) </td>
    <td style="text-align:right;font-size: 14px;"> (14%) </td>
    <td style="text-align:left;font-size: 14px;"> (125%) </td>
    </tr>
    <tr>
    <td style="text-align:left;"> Between mid-level groups </td>
    <td style="text-align:right;"> 0.188 </td>
    <td style="text-align:right;"> 0.180 </td>
    <td style="text-align:right;"> -0.007 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.002 </td>
    <td style="text-align:right;"> 0.020 </td>
    <td style="text-align:left;"> -0.029 </td>
    </tr>
    <tr>
    <td style="text-align:left;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-29%) </td>
    <td style="text-align:right;font-size: 14px;"> (-272%) </td>
    <td style="text-align:left;font-size: 14px;"> (402%) </td>
    </tr>
    <tr grouplength="19"><td colspan="9" style="border-bottom: 1px solid;"><strong>Within mid-level groups (sorted by Diff.)</strong></td></tr>
<tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 111 Entertainment </td>
    <td style="text-align:right;"> 0.232 </td>
    <td style="text-align:right;"> 0.145 </td>
    <td style="text-align:right;"> -0.088 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> -0.013 </td>
    <td style="text-align:right;"> -0.000 </td>
    <td style="text-align:left;"> -0.075 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;font-size: 14px;" indentlevel="1">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (14%) </td>
    <td style="text-align:right;font-size: 14px;"> (0%) </td>
    <td style="text-align:left;font-size: 14px;"> (86%) </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 103 Healthcare </td>
    <td style="text-align:right;"> 0.314 </td>
    <td style="text-align:right;"> 0.226 </td>
    <td style="text-align:right;"> -0.087 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> -0.016 </td>
    <td style="text-align:right;"> -0.017 </td>
    <td style="text-align:left;"> -0.054 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;font-size: 14px;" indentlevel="1">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (19%) </td>
    <td style="text-align:right;font-size: 14px;"> (19%) </td>
    <td style="text-align:left;font-size: 14px;"> (62%) </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 112 Tutors, athletes NEC </td>
    <td style="text-align:right;"> 0.109 </td>
    <td style="text-align:right;"> 0.048 </td>
    <td style="text-align:right;"> -0.061 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> -0.012 </td>
    <td style="text-align:right;"> -0.001 </td>
    <td style="text-align:left;"> -0.048 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;font-size: 14px;" indentlevel="1">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (19%) </td>
    <td style="text-align:right;font-size: 14px;"> (2%) </td>
    <td style="text-align:left;font-size: 14px;"> (79%) </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 104 Social </td>
    <td style="text-align:right;"> 0.137 </td>
    <td style="text-align:right;"> 0.106 </td>
    <td style="text-align:right;"> -0.031 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> -0.004 </td>
    <td style="text-align:right;"> 0.012 </td>
    <td style="text-align:left;"> -0.039 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;font-size: 14px;" indentlevel="1">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (14%) </td>
    <td style="text-align:right;font-size: 14px;"> (-39%) </td>
    <td style="text-align:left;font-size: 14px;"> (125%) </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 110 Arts, design, photo </td>
    <td style="text-align:right;"> 0.043 </td>
    <td style="text-align:right;"> 0.016 </td>
    <td style="text-align:right;"> -0.028 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> -0.002 </td>
    <td style="text-align:right;"> 0.005 </td>
    <td style="text-align:left;"> -0.031 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;font-size: 14px;" indentlevel="1">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (8%) </td>
    <td style="text-align:right;font-size: 14px;"> (-18%) </td>
    <td style="text-align:left;font-size: 14px;"> (110%) </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 107 Teachers </td>
    <td style="text-align:right;"> 0.090 </td>
    <td style="text-align:right;"> 0.079 </td>
    <td style="text-align:right;"> -0.012 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.003 </td>
    <td style="text-align:right;"> -0.003 </td>
    <td style="text-align:left;"> -0.011 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;font-size: 14px;" indentlevel="1">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-26%) </td>
    <td style="text-align:right;font-size: 14px;"> (29%) </td>
    <td style="text-align:left;font-size: 14px;"> (96%) </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 102 Engineers and technicians </td>
    <td style="text-align:right;"> 0.026 </td>
    <td style="text-align:right;"> 0.016 </td>
    <td style="text-align:right;"> -0.011 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> -0.004 </td>
    <td style="text-align:right;"> 0.014 </td>
    <td style="text-align:left;"> -0.021 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;font-size: 14px;" indentlevel="1">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (38%) </td>
    <td style="text-align:right;font-size: 14px;"> (-132%) </td>
    <td style="text-align:left;font-size: 14px;"> (194%) </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 109 Writers </td>
    <td style="text-align:right;"> 0.004 </td>
    <td style="text-align:right;"> 0.001 </td>
    <td style="text-align:right;"> -0.003 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.001 </td>
    <td style="text-align:left;"> -0.004 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;font-size: 14px;" indentlevel="1">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-1%) </td>
    <td style="text-align:right;font-size: 14px;"> (-30%) </td>
    <td style="text-align:left;font-size: 14px;"> (131%) </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 105 Legal </td>
    <td style="text-align:right;"> 0.005 </td>
    <td style="text-align:right;"> 0.005 </td>
    <td style="text-align:right;"> -0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.003 </td>
    <td style="text-align:left;"> -0.003 </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;font-size: 14px;" indentlevel="1">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-0%) </td>
    <td style="text-align:right;font-size: 14px;"> (-6%) </td>
    <td style="text-align:right;font-size: 14px;"> (-1302%) </td>
    <td style="text-align:left;font-size: 14px;"> (1408%) </td>
    </tr>
    <tr>
    <td style="text-align:left;padding-left: 2em;" indentlevel="1"> 101 Scientists </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:right;"> 0.000 </td>
    <td style="text-align:left;"> 0.000 </td>
    </tr>
    <tr>
    <td style="text-align:left;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;">  </td>
    <td style="text-align:right;font-size: 14px;"> (100%) </td>
    <td style="text-align:right;font-size: 14px;"> (0%) </td>
    <td style="text-align:right;font-size: 14px;"> (0%) </td>
    <td style="text-align:right;font-size: 14px;"> (25%) </td>
    <td style="text-align:right;font-size: 14px;"> (63%) </td>
    <td style="text-align:left;font-size: 14px;"> (13%) </td>
    </tr>
</tbody>
</table>
<pre><code class="language-html">#' ElbersDrillDownSpecTech.R
#' Use Elbers protocol to drill down in specialist/technical occupations
#' 2021-12-21
#' Adapted from
#' Elbers, Benjamin. A Method for Studying Differences in Segregation Across Time and Space. 
#' SocArXiv, 21 Dec. 2018, supplementary materials

#' Redone 2022-05-16

require("tidyverse")
require("tidylog", warn.conflicts = FALSE)
require("fst")
require("ggthemes")
require("segregation")
require("cowplot")
require("knitr")
require("kableExtra")
require("data.table")
require("dplyr")

## data is in occgenall
head(occgenall)

# make copy to use as Elbers
d <- as_tibble(occgenall) %>% filter(OccMain == "A") %>%
    mutate(w = n,OccSub = as.character(OccSub),
    OccMain = as.character(OccMain), OccSub=as.character(OccSub),
    OccMid=as.character(OccMid),OccMinor=as.character(OccMinor),
    year = as.integer(year)) %>%
    filter(OccMinor != 1267) # remove Workers not classifiable by occupation

head(d)

##########################
###### descriptives ######
##########################

samplesize <- d %>% filter(!is.na(n)) %>%
    group_by(year) %>%
    summarize(n = sum(n)) %>%
    mutate(var = "Sample size (in 1000)",
        n = round(n / 1000)) %>%
    spread(year, n)

occ1985 <- filter(d, year == 1985) %>% pull(OccMinor) %>% unique
occ1990 <- filter(d, year == 1990) %>% pull(OccMinor) %>% unique
occ1995 <- filter(d, year == 1995) %>% pull(OccMinor) %>% unique
occ2000 <- filter(d, year == 2000) %>% pull(OccMinor) %>% unique
occ2005 <- filter(d, year == 2005) %>% pull(OccMinor) %>% unique
common_occ <- intersect(occ1985 , occ1990 ) %>%
    intersect(occ1995 ) %>% intersect(occ2000 ) %>% 
    intersect(occ2005 )

nocc <- tribble(~var, ~`1985`, ~`1990`, ~`1995`, ~`2000`, ~`2005`,
    "Number of occupations", length(occ1985),
        length(occ1990), length(occ1995), length(occ2000),
    length(occ2005),
    "Appearing occupations", NA,
        length(setdiff(occ1990, occ1985)),
        length(setdiff(occ1995, occ1990)),
        length(setdiff(occ2000, occ1995)),
        length(setdiff(occ2005, occ2000)),
    "Disappearing occupations", NA,
        length(setdiff(occ1985, occ1990)),
        length(setdiff(occ1990, occ1995)),
        length(setdiff(occ1995, occ2000)),
        length(setdiff(occ2000, occ2005))
    )

gender <- d %>% filter(!is.na(n)) %>%
    group_by(year, Gender) %>%
    summarize(n = sum(w)) %>%
    group_by(year) %>%
    mutate(p = round(n / sum(n) * 100)) %>%
    filter(Gender == "FEMALE") %>%
    select(-n) %>%
    spread(year, p) %>%
    rename(var = Gender)

occ <- d %>% filter(!is.na(n)) %>%
    group_by(year, OccMid) %>%
    summarize(n = sum(w)) %>%
    group_by(year) %>%
    mutate(p = round(n / sum(n) * 100)) %>%
    select(-n) %>%
    spread(year, p) %>%
    merge(hoc[nchar(hoc$MidTitleLabel)>0,c("OccMid","MidTitleLabel")]) %>%
    mutate(OccMid= paste(OccMid,MidTitleLabel,sep=" "))  %>%
    select(-MidTitleLabel) %>%
    rename(var = OccMid)

occ_gender <- d %>% filter(!is.na(n)) %>%
    group_by(year, OccMid, Gender) %>%
    summarize(n = sum(w)) %>%
    group_by(year, OccMid) %>%
    mutate(p = round(n / sum(n) * 100)) %>%
    filter(Gender== "FEMALE") %>%
    select(-n, -Gender) %>%
    spread(year, p) %>%
    merge(hoc[nchar(hoc$MidTitleLabel)>0,c("OccMid","MidTitleLabel")]) %>%
    mutate(OccMid= paste(OccMid,MidTitleLabel,sep=" "))  %>%
    select(-MidTitleLabel) %>%
    rename(var = OccMid)

desc <- as.data.frame(bind_rows(samplesize, nocc, gender, occ, occ_gender))
desc[5, "var"] <- "Female"
names(desc)[[1]] <- ""

options(knitr.kable.NA = "")
options(knitr.table.format = "html")
kable(desc, "html", booktabs = T) %>%
    kable_styling(latex_options = c("striped", "condensed"),
        position = "center") %>%
    row_spec(0, align = "c") %>%
    group_rows("A. Number of occupations", 2, 4) %>%
    group_rows("B. Labor force participation (%)", 5, 5) %>%
    group_rows("C. Distribution of occupational major groups (%)", 6, 17) %>%
    group_rows("D. Female labor force by major groups (%)", 18, 29) %>%
    cat(file = "Output/SpecTechDescriptives.html", sep = "\n")

#####################################
###### analysis: cross-section ######
#####################################

by_year <- d %>%
    group_by(year) %>%
    do(mutual_total(., "Gender", "OccMinor", weight = "w"))
p_total <- ggplot(by_year, aes(x = year, y = est, linetype = stat)) +
    geom_point() + geom_line() + ylim(0, max(by_year$est)) +
    theme_bw() +
    theme(axis.title.x = element_blank(),
        axis.title.y = element_blank(),
        legend.title = element_blank(),
        legend.position = "none")

d %>%
    filter(OccMinor %in% common_occ) %>%
    group_by(year) %>%
    do(mutual_total(., "Gender", "OccMinor", weight = "w")) %>%
    rename(est_common = est) %>%
    left_join(by_year) %>%
    mutate(est / est_common)

between <- d %>%
    group_by(year) %>%
    do(mutual_total(., "Gender", "OccMid", weight = "w"))
p_between <- ggplot(between, aes(x = year, y = est, linetype = stat)) +
    geom_point() + geom_line() +
    ylim(0, max(by_year$est)) +
    theme_bw() +
    theme(axis.title.x = element_blank(),
        axis.title.y = element_blank(),
        legend.title = element_blank(),
        legend.position = "none")

by_year_major <- d %>%
    group_by(year, OccMid) %>%
        mutate( nunits = n()) %>% ## remove OccMid sets with only
    filter(nunits > 2) %>%    ##  one occupation
    select(-nunits) %>%
    do(mutual_total(., "Gender", "OccMinor", weight = "w")) %>%
    merge(hoc[nchar(hoc$MidTitleLabel)>0,c("OccMid","MidTitleLabel")]) %>%
    mutate(OccMid= paste(OccMid,MidTitleLabel,sep=" "))  %>%
    select(-MidTitleLabel)

p_major <- ggplot(by_year_major, aes(x = year, y = est, linetype = stat)) +
    facet_wrap("OccMid") + geom_point() + geom_line() +
    ylim(0, max(by_year_major$est)) +
    theme_bw() +
    theme(strip.text = element_text(size=10),
    axis.title.x = element_blank(),
        axis.title.y = element_blank(),
        legend.title = element_blank(),
        legend.position = "bottom",
        strip.text.x = element_text(margin = margin(2, 0, 2, 0)))

p_complete <- ggdraw() +
    draw_plot(p_total, .1, .75, .375, .23) +
    draw_plot(p_between, .5, .75, .375, .23) +
    draw_plot(p_major, 0, 0, 1, .73) +
    draw_plot_label(c("A: Total", "B: Between", "C: Within"),
    c(.11, .51, 0.01), c(1.0, 1.0, .75), size = 12, hjust = 0)
ggsave("Output/SpecTechSegregation01.pdf", p_complete, width = 6, height = 8)
ggsave("Output/SpecTechSegregation01.png", p_complete, width = 9, height = 12)

#############################
###### analysis: change ######
##############################

d1985 <- filter(d, year == 1985)
d2005 <- filter(d, year == 2005)

diffs <- bind_rows(
    mutual_difference(d1985 , d2005, "Gender", "OccMinor", weight = "w",
            precision = .000001) %>%
        mutate(OccMid = "Specialists/technicians total") %>%
        spread(stat, est),
    mutual_difference(d1985 , d2005, "Gender", "OccMid", weight = "w",
            precision = .000001) %>%
        mutate(OccMid = "Between mid-level groups") %>%
        spread(stat, est),
    d %>% filter(OccMid != 108) %>% filter(OccMid != 106) %>%
        group_by(OccMid) %>%
            do(mutual_difference(filter(., year == 1985), filter(., year == 2005),
                        "Gender", "OccMinor", weight = "w", precision = .000001)) %>%
            spread(stat, est) %>%
        merge(hoc[nchar(hoc$MidTitleLabel)>0,c("OccMid","MidTitleLabel")]) %>% # add mid group titles
            mutate(OccMid= paste(OccMid,MidTitleLabel,sep=" "))  %>%
            select(-MidTitleLabel)  %>%
            arrange(diff)
    )

# NOTE mutual_difference doesn't output additions or removals if there are none.
diffs_total <- diffs %>%
    select(OccMid, M1, M2, diff, additions, removals, unit_marginal, group_marginal, structural) %>%
    mutate(order = 1:12)

diffs_percentage <- diffs_total %>%
    mutate(additions = round(additions / diff * 100),
    removals = round(removals / diff * 100),
        unit_marginal = round(unit_marginal / diff * 100),
        group_marginal = round(group_marginal / diff * 100),
        structural = round(structural / diff * 100),
        diff = 100) %>%
    select(-OccMid, -M1, -M2) %>%
    mutate_at(vars(diff:structural),
        function(x) paste0("(", sprintf("%.0f", x), "%)"))

diffs_total <- diffs_total %>%
    mutate_at(vars(M1:structural), function(x) paste0( sprintf("%.3f", x)))

options(knitr.kable.NA = "")
bind_rows(diffs_total, diffs_percentage) %>%
    arrange(order, M1) %>%
    select(-order) %>%
    kable("html", booktabs = TRUE, escape = FALSE,
        align = c("l", "r", "r", "r", "r", "r", "r", "r"),
        col.names = linebreak(c("Component", "1985", "2005", "Diff.","Appearing",
            "Disappearing", "Occupation", "Gender", "Structural"))) %>%
    kable_styling(latex_options = c("striped", "condensed", "scale_down"),
        position = "center") %>%
    add_header_above(c(" ", "M" = 3, " "=2, "Marginal" = 2," ")) %>%
    group_rows("Within mid-level groups (sorted by Diff.)", 5, 23) %>%
    row_spec(c(2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22,24), font_size = 14) %>%
    #row_spec(c(23), font_size = 10) %>%
    cat(file = "Output/SpecTechDiffs.html", sep = "\n")

diffs_plot <- diffs %>%
    filter(OccMid!= "Between mid-level groups") %>%
    mutate(order = c(1, rep(2, 10))) %>%
    arrange(order, diff) %>%
    mutate(order = 1:11) %>%
    mutate(OccMid= ifelse(OccMid == "Total", "Specialists/technicians total", paste("Only:", OccMid))) %>%
    select(OccMid, order, group_marginal, unit_marginal, structural, additions, removals) %>%
    gather(component, value, -OccMid, -order) %>%
    mutate(component = recode_factor(component,
        `group_marginal` = "Gender margins",
        `unit_marginal` = "Occupation margins",
        `additions` = "Appearing occupations",
        `removals` = "Disappearing occupations",
        `structural` = "Structural", .ordered = TRUE))

labels <- rev(diffs_plot$OccMid[1:11])
labels[11] <- expression(bold("Specialists/technicians total"))

p <- ggplot(diffs_plot, aes(y = value, x = reorder(OccMid, -order), fill = component)) +
    geom_col() +
    geom_hline(yintercept = 0) +
    theme_bw() +
    theme(axis.title.y = element_blank(), legend.position = "bottom",
        legend.title = element_blank()) +
    guides(fill = guide_legend(nrow = 2, byrow = TRUE)) +
    scale_fill_manual(values = ggthemes::colorblind_pal()(5)) +
    scale_x_discrete(labels = labels) +
    ylab("Difference in M") +
    coord_flip()

ggsave("Output/SpecTechDiffs.png", p, width = 8, height = 5)
</code></pre>
</main>
<div id="references" class="section level2">
    <h2 class="hasAnchor">
    <a href="#references" class="anchor"></a>References</h2>
    <p><a id="DemingStephan1940"></a>Deming, W. E., and Frederick F. Stephan. (1940) "On a Least Squares Adjustment of a Sampled Frequency 
        Table when the Expected Marginal Totals are Known." 
        The Annals of Mathematical Statistics, vol. 11, no. 4, pp. 427-444. 
    <a href="https://www.jstor.org/stable/2235722">https://www.jstor.org/stable/2235722</a></p>
    <p><a id="Elbers2021"></a>Elbers, Benjamin (2021). A Method for Studying Differences in Segregation Across Time and Space. 
        Sociological Methods &amp; Research. <a href="https://doi.org/10.1177/0049124121986204" 
        class="uri">doi:10.18637/jss.v089.i07</a></p>
    <p><a id="Ho2012"></a>Ho, Swee‐Lin. (2012) "Tokyo at 10: Establishing difference through the friendship networks of women executives in Japan." 
        Journal of the Royal Anthropological Institute 18.1: 83-102.
    <a href="https://doi.org/10.1111/j.1467-9655.2011.01732.x">https://doi.org/10.1111/j.1467-9655.2011.01732.x</a></p>
    <p><a id="Ho2015"></a>Ho, Swee-Lin. (2015) "‘License to drink’: White-collar female workers and Japan’s urban night space." 
        Ethnography 16.1: 25-50. 
        <a href="https://doi.org/10.1177/1466138113506632">https://doi.org/10.1177/1466138113506632</p>
    <p><a id="UchikoshiEtal2020"></a>Uchikoshi, Fumiya, Ryota Mugiyama, and Megumi Oguro. (2020) Still Separate in STEM?: Trends in Sex Segregation by Field of Study in Japan, 1975-2019. 
        Institute of Economic Research, Hitotsubashi University. Discussion Paper Series, A710 
        <a href="https://osf.io/txqka/download" class="uri">https://osf.io/txqka/download</a></p>
    </div>    
</body>
</html>